/*!
 * angularjs-jf-contextual-spinner
 * 
 * Version: 0.0.1 - 2015-01-01T20:17:21.253Z
 * License: MIT
 */
angular.module("jf_NavBarLoader",[]).provider("jf_NavLoadingBarCfg",function(){this.loadingBarTemplate='<div id="jf-nav-loading-bar"></div>';var e={hideDelay:void 0,baseOpacity:void 0,baseColor:void 0,loadingBarTemplate:this.loadingBarTemplate};this.setConfigs=function(n){for(var r in n)e.hasOwnProperty(r)&&(e[r]=n[r])};var n=function(){return e};this.$get=function(){return{getConfig:n}}}).factory("jf_httpInterceptor",function(e,n){var r=0;return{request:function(t){return r++,n.$broadcast("jf_NavBarLoader:show"),t||e.when(t)},response:function(t){return 0===--r&&n.$broadcast("jf_NavBarLoader:hide"),t||e.when(t)},responseError:function(t){return--r||n.$broadcast("jf_NavBarLoader:hide"),e.reject(t)}}}).config(function(e){e.interceptors.push("jf_httpInterceptor")}).directive("jfNavBarLoader",function(e,n){return{link:function(r,t){var a=$(t),o=e.getConfig(),i=angular.element(e.getConfig().loadingBarTemplate),d="undefined"!=typeof o.hideDelay?o.hideDelay:750,f="undefined"!=typeof o.baseOpacity?o.baseOpacity:.3,s="undefined"!=typeof o.baseColor?o.baseColor:"white";return i.css({height:a.height(),opacity:f,backgroundColor:s}),r.$on("jf_NavBarLoader:show",function(){a.children().length?i.insertBefore(a.children().first()):i.appendTo(a),i.css({width:"0%"}),i.show(),console.log("loader ",i);var e=function(r){return r>=100?!1:(i.css({width:r+"%",WebkitTransition:"width 0.75s ease",transition:"width 0.75s ease"}),void n(function(){e(r+5)},1))};return e(Math.floor(15*Math.random())+1)}),r.$on("jf_NavBarLoader:hide",function(){i.css({width:"100%"}),n(function(){i.fadeOut("fast")},d)})}}});